{{- if not (eq .Values.cluster.apiServer "local") }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ .Values.tenant }}-{{ .Values.environment }}-cluster
  labels:
    argocd.argoproj.io/secret-type: cluster
type: Opaque
stringData:
  name: {{ .Values.tenant }}-{{ .Values.environment }}-cluster
  server: {{ .Values.cluster.apiServer }}
  config: {{ .Values.cluster.config | toJson | quote}}
{{- end }}
